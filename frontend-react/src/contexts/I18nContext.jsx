import React, { createContext, useState, useEffect, useMemo, useCallback } from 'react';

// Create context
export const I18nContext = createContext(null);

const translations = {
  tr: {
    home: 'Ana Sayfa',
    learn: 'Ã–ÄŸren',
    assignments: 'Ã–devler',
    badges: 'Rozetler',
    dashboard: 'Panelim',
    classes: 'SÄ±nÄ±flar',
    exams: 'SÄ±navlar',
    settings: 'Ayarlar',
    profile: 'Profil',
    preview: 'Ã–nizle',
    save: 'Kaydet',
    cancel: 'Ä°ptal',
    create_exam: 'Yeni SÄ±nav OluÅŸtur',
    edit_exam: 'SÄ±navÄ± DÃ¼zenle',
    select_classes: 'SÄ±nÄ±flarÄ± SeÃ§',
    login: 'GiriÅŸ Yap',
    register: 'KayÄ±t Ol',
    logout: 'Ã‡Ä±kÄ±ÅŸ',
    theme_light: 'AydÄ±nlÄ±k',
    theme_dark: 'KaranlÄ±k',
    language: 'Dil',
    home_hero_title: 'Matematik MacerasÄ±',
    home_hero_sub: 'Ã–rÃ¼ntÃ¼lerle EÄŸlenceli Ã–ÄŸrenme DÃ¼nyasÄ±',
    home_hero_desc: 'SayÄ±lar, ÅŸekiller ve renklerle dolu harika bir yolculuÄŸa hazÄ±r mÄ±sÄ±n? Hadi birlikte Ã¶rÃ¼ntÃ¼leri keÅŸfedelim! ğŸš€',
    // Home page
    home_public_hero_title: 'ğŸ¯ Ã–rÃ¼ntÃ¼ MacerasÄ± ğŸš€',
    home_public_hero_subtitle: 'MatematiÄŸi eÄŸlenceli hale getiren platform! ğŸ¨',
    home_start_btn: 'ğŸ‰ Hemen BaÅŸla',
    home_login_btn: 'ğŸ”‘ GiriÅŸ Yap',
    home_stats_students: 'Mutlu Ã–ÄŸrenci',
    home_stats_lessons: 'EÄŸlenceli Ders',
    home_stats_success: 'BaÅŸarÄ± OranÄ±',
    home_features_title: 'âœ¨ Neden Bizi SeÃ§melisin?',
    home_feature_gamification: 'OyunlaÅŸtÄ±rma',
    home_feature_gamification_desc: 'Rozetler kazan, seviyeleri geÃ§! ğŸ…',
    home_feature_design: 'Renkli TasarÄ±m',
    home_feature_design_desc: 'Ã‡ocuklar iÃ§in eÄŸlenceli arayÃ¼z! ğŸŒˆ',
    home_feature_progress: 'Ä°lerleme Takibi',
    home_feature_progress_desc: 'GeliÅŸimini takip et, hedeflerine ulaÅŸ! ğŸ“ˆ',
    home_feature_teachers: 'Uzman Ã–ÄŸretmenler',
    home_feature_teachers_desc: 'Deneyimli Ã¶ÄŸretmen iÃ§erikleri! â­',
    home_feature_personalized: 'KiÅŸisel Ã–ÄŸrenme',
    home_feature_personalized_desc: 'Sana Ã¶zel Ã¶ÄŸrenme planÄ±! ğŸ’¡',
    home_feature_daily: 'GÃ¼nlÃ¼k GÃ¶revler',
    home_feature_daily_desc: 'Her gÃ¼n yeni gÃ¶revler ve Ã¶dÃ¼ller! ğŸ',
    home_cta_title: 'ğŸš€ Maceraya HazÄ±r mÄ±sÄ±n?',
    home_cta_subtitle: 'Hemen katÄ±l, Ã¶ÄŸrenmeye baÅŸla!',
    home_teacher_welcome: 'ğŸ‘©â€ğŸ« HoÅŸgeldiniz',
    home_teacher_subtitle: 'BugÃ¼n sÄ±nÄ±flarÄ±nÄ±zÄ± ileri taÅŸÄ±maya hazÄ±r mÄ±sÄ±nÄ±z? ğŸš€',
    home_student_welcome: 'ğŸ‘¨â€ğŸ“ Merhaba',
    home_student_subtitle: 'Ã–ÄŸrenme macerana devam etmeye hazÄ±r mÄ±sÄ±n? ğŸŒˆ',
    home_quick_actions: 'âš¡ HÄ±zlÄ± Aksiyonlar',
    home_create_exam: 'â• SÄ±nav OluÅŸtur',
    home_create_survey: 'ğŸ“ Anket OluÅŸtur',
    home_add_class: 'ğŸ« SÄ±nÄ±f Ekle',
    home_question_pool: 'â“ Soru Havuzu',
    home_continue_learning: 'ğŸ“š Ã–ÄŸrenmeye Devam Et',
    home_my_exams: 'ğŸ§ª SÄ±navlarÄ±m',
    home_surveys: 'ğŸ“ Anketler',
    home_daily_challenge: 'ğŸ”¥ GÃ¼nlÃ¼k GÃ¶rev',
    home_upcoming_exams: 'ğŸ§ª YaklaÅŸan SÄ±navlar',
    home_upcoming_exams_teacher_hint: 'Sizin oluÅŸturduklarÄ±nÄ±z',
    home_upcoming_exams_student_hint: 'Sizin iÃ§in planlananlar',
    home_surveys_preview: 'ğŸ“ Anketler',
    home_surveys_teacher_hint: 'Son oluÅŸturduklarÄ±nÄ±z',
    home_surveys_student_hint: 'Cevaplaman gerekenler',
    home_daily_challenge_title: 'ğŸ”¥ GÃ¼nlÃ¼k GÃ¶rev',
    home_daily_challenge_hint: 'BugÃ¼ne Ã¶zel!',
    home_daily_challenge_solve: 'Hemen Ã‡Ã¶z',
    home_daily_challenge_empty: 'BugÃ¼n iÃ§in gÃ¶rev yok, yarÄ±n tekrar kontrol et! ğŸ¯',
    home_leaderboard: 'ğŸ† HaftalÄ±k Liderler',
    home_points: 'puan',
    home_loading: 'YÃ¼kleniyorâ€¦',
    home_error: 'Hata',
    home_no_exams: 'Åimdilik sÄ±nav bulunmuyor.',
    home_no_surveys: 'Åimdilik anket yok.',
    home_view: 'GÃ¶rÃ¼ntÃ¼le',
    home_open: 'AÃ§',
    stats_section: 'Ä°statistikler',
    stat_questions: 'EÄŸlenceli Soru',
    stat_students: 'Mutlu Ã–ÄŸrenci',
    stat_xp: 'KazanÄ±lan XP',
    stat_fun: 'EÄŸlence Garantisi',
    exam_basic_info: 'Temel Bilgiler',
    exam_title_label: 'SÄ±nav BaÅŸlÄ±ÄŸÄ±',
    exam_title_ph: 'Ã–rn: 10. SÄ±nÄ±f Matematik DÃ¶nem Sonu SÄ±navÄ±',
    exam_class_level: 'SÄ±nÄ±f Seviyesi',
    exam_class_level_select: 'SÄ±nÄ±f Seviyesi SeÃ§in',
    exam_category: 'Kategori',
    exam_category_select: 'Kategori SeÃ§in',
    exam_difficulty: 'Zorluk Seviyesi',
    difficulty_easy: 'Kolay',
    difficulty_medium: 'Orta',
    difficulty_hard: 'Zor',
    exam_description: 'AÃ§Ä±klama',
    exam_description_ph: 'SÄ±nav hakkÄ±nda kÄ±sa bir aÃ§Ä±klama yazÄ±n...',
    exam_duration_min: 'SÃ¼re (Dakika)',
    exam_pass_mark: 'GeÃ§me Notu (%)',
    exam_total_points: 'Toplam Puan',
    exam_timing: 'Zamanlama',
    exam_start_date: 'BaÅŸlangÄ±Ã§ Tarihi',
    exam_end_date: 'BitiÅŸ Tarihi',
    exam_assignment: 'SÄ±nav Atama',
    exam_assignment_hint: 'Bu sÄ±navÄ±n hangi sÄ±nÄ±flara atanacaÄŸÄ±nÄ± seÃ§in (opsiyonel)',
    exam_settings: 'SÄ±nav AyarlarÄ±',
    exam_publish: 'SÄ±navÄ± YayÄ±nla',
    exam_allow_review: 'Ä°ncelemeye Ä°zin Ver',
    exam_shuffle_questions: 'SorularÄ± KarÄ±ÅŸtÄ±r',
    exam_show_results: 'SonuÃ§larÄ± GÃ¶ster',
    exam_allow_retake: 'Tekrar GiriÅŸe Ä°zin Ver',
    exam_max_attempts: 'Maksimum Deneme SayÄ±sÄ±',
    exam_question_selection: 'Soru SeÃ§imi',
    questions_selected: 'soru seÃ§ildi',
    all_classes: 'TÃ¼m SÄ±nÄ±flar',
    all_subjects: 'TÃ¼m Dersler',
    all_difficulties: 'TÃ¼m Zorluklar',
    no_questions_for_level: 'iÃ§in soru bulunamadÄ±. LÃ¼tfen soru havuzuna soru ekleyin.',
    select_class_level_first: 'LÃ¼tfen Ã¶nce sÄ±nÄ±f seviyesi seÃ§in.',
    preview_exam: 'Ã–nizle',
    save_exam: 'SÄ±navÄ± Kaydet',
    no_classes_yet: 'HenÃ¼z oluÅŸturulmuÅŸ sÄ±nÄ±f bulunmuyor. Ã–nce sÄ±nÄ±f oluÅŸturmalÄ±sÄ±nÄ±z.',
    class_suffix: 'SÄ±nÄ±f',
    student_suffix: 'Ã¶ÄŸrenci',
    classes_selected: 'sÄ±nÄ±f seÃ§ildi',
    status: 'Durum',
    status_draft: 'Taslak',
    status_active: 'Aktif',
    status_ended: 'Sona Erdi',
    exam_loading: 'SÄ±nav yÃ¼kleniyor...',
    error: 'Hata',
    back_to_exams: 'SÄ±navlara DÃ¶n',
    questions: 'Sorular',
    questions_added: 'soru eklendi',
    saving: 'ğŸ’¾ Kaydediliyor...',
    save_changes: 'ğŸ’¾ DeÄŸiÅŸiklikleri Kaydet'
  },
  en: {
    home: 'Home',
    learn: 'Learn',
    assignments: 'Assignments',
    badges: 'Badges',
    dashboard: 'Dashboard',
    classes: 'Classes',
    exams: 'Exams',
    settings: 'Settings',
    profile: 'Profile',
    preview: 'Preview',
    save: 'Save',
    cancel: 'Cancel',
    create_exam: 'Create New Exam',
    edit_exam: 'Edit Exam',
    select_classes: 'Select Classes',
    login: 'Login',
    register: 'Register',
    logout: 'Logout',
    theme_light: 'Light',
    theme_dark: 'Dark',
    language: 'Language',
    home_hero_title: 'Math Adventure',
    home_hero_sub: 'A Fun World of Learning with Patterns',
    home_hero_desc: 'Are you ready for a journey full of numbers, shapes and colors? Let us discover patterns together! ğŸš€',
    // Home page EN
    home_public_hero_title: 'ğŸ¯ Pattern Adventure ğŸš€',
    home_public_hero_subtitle: 'Making math fun! ğŸ¨',
    home_start_btn: 'ğŸ‰ Get Started',
    home_login_btn: 'ğŸ”‘ Login',
    home_stats_students: 'Happy Students',
    home_stats_lessons: 'Fun Lessons',
    home_stats_success: 'Success Rate',
    home_features_title: 'âœ¨ Why Choose Us?',
    home_feature_gamification: 'Gamification',
    home_feature_gamification_desc: 'Earn badges, level up! ğŸ…',
    home_feature_design: 'Colorful Design',
    home_feature_design_desc: 'Fun UI for kids! ğŸŒˆ',
    home_feature_progress: 'Progress Tracking',
    home_feature_progress_desc: 'Track your growth, reach your goals! ğŸ“ˆ',
    home_feature_teachers: 'Expert Teachers',
    home_feature_teachers_desc: 'Experienced educator content! â­',
    home_feature_personalized: 'Personalized Learning',
    home_feature_personalized_desc: 'Custom learning path for you! ğŸ’¡',
    home_feature_daily: 'Daily Challenges',
    home_feature_daily_desc: 'New tasks and rewards every day! ğŸ',
    home_cta_title: 'ğŸš€ Ready for Adventure?',
    home_cta_subtitle: 'Join now, start learning!',
    home_teacher_welcome: 'ğŸ‘©â€ğŸ« Welcome',
    home_teacher_subtitle: 'Ready to elevate your classes today? ğŸš€',
    home_student_welcome: 'ğŸ‘¨â€ğŸ“ Hello',
    home_student_subtitle: 'Ready to continue your learning adventure? ğŸŒˆ',
    home_quick_actions: 'âš¡ Quick Actions',
    home_create_exam: 'â• Create Exam',
    home_create_survey: 'ğŸ“ Create Survey',
    home_add_class: 'ğŸ« Add Class',
    home_question_pool: 'â“ Question Pool',
    home_continue_learning: 'ğŸ“š Continue Learning',
    home_my_exams: 'ğŸ§ª My Exams',
    home_surveys: 'ğŸ“ Surveys',
    home_daily_challenge: 'ğŸ”¥ Daily Challenge',
    home_upcoming_exams: 'ğŸ§ª Upcoming Exams',
    home_upcoming_exams_teacher_hint: 'Your created exams',
    home_upcoming_exams_student_hint: 'Planned for you',
    home_surveys_preview: 'ğŸ“ Surveys',
    home_surveys_teacher_hint: 'Your recent surveys',
    home_surveys_student_hint: 'Need your response',
    home_daily_challenge_title: 'ğŸ”¥ Daily Challenge',
    home_daily_challenge_hint: 'Today only!',
    home_daily_challenge_solve: 'Solve Now',
    home_daily_challenge_empty: 'No challenge today, check back tomorrow! ğŸ¯',
    home_leaderboard: 'ğŸ† Weekly Leaders',
    home_points: 'points',
    home_loading: 'Loadingâ€¦',
    home_error: 'Error',
    home_no_exams: 'No exams at the moment.',
    home_no_surveys: 'No surveys at the moment.',
    home_view: 'View',
    home_open: 'Open',
    stats_section: 'Statistics',
    stat_questions: 'Fun Questions',
    stat_students: 'Happy Students',
    stat_xp: 'XP Earned',
    stat_fun: 'Fun Guaranteed',
    exam_basic_info: 'Basic Information',
    exam_title_label: 'Exam Title',
    exam_title_ph: 'e.g., 10th Grade Math Final Exam',
    exam_class_level: 'Class Level',
    exam_class_level_select: 'Select Class Level',
    exam_category: 'Category',
    exam_category_select: 'Select Category',
    exam_difficulty: 'Difficulty',
    difficulty_easy: 'Easy',
    difficulty_medium: 'Medium',
    difficulty_hard: 'Hard',
    exam_description: 'Description',
    exam_description_ph: 'Write a short description about the exam...',
    exam_duration_min: 'Duration (Minutes)',
    exam_pass_mark: 'Pass Mark (%)',
    exam_total_points: 'Total Points',
    exam_timing: 'Timing',
    exam_start_date: 'Start Date',
    exam_end_date: 'End Date',
    exam_assignment: 'Assign Exam',
    exam_assignment_hint: 'Select which classes this exam will be assigned to (optional)',
    exam_settings: 'Exam Settings',
    exam_publish: 'Publish Exam',
    exam_allow_review: 'Allow Review',
    exam_shuffle_questions: 'Shuffle Questions',
    exam_show_results: 'Show Results',
    exam_allow_retake: 'Allow Retake',
    exam_max_attempts: 'Maximum Attempts',
    exam_question_selection: 'Question Selection',
    questions_selected: 'questions selected',
    all_classes: 'All Classes',
    all_subjects: 'All Subjects',
    all_difficulties: 'All Difficulties',
    no_questions_for_level: 'has no questions. Please add to the question bank.',
    select_class_level_first: 'Please select class level first.',
    preview_exam: 'Preview',
    save_exam: 'Save Exam',
    no_classes_yet: 'No classes created yet. Please create a class first.',
    class_suffix: 'Class',
    student_suffix: 'students',
    classes_selected: 'classes selected',
    status: 'Status',
    status_draft: 'Draft',
    status_active: 'Active',
    status_ended: 'Ended',
    exam_loading: 'Loading exam...',
    error: 'Error',
    back_to_exams: 'Back to Exams',
    questions: 'Questions',
    questions_added: 'questions added',
    saving: 'ğŸ’¾ Saving...',
    save_changes: 'ğŸ’¾ Save Changes'
  }
};

export function I18nProvider({ children }) {
  const [lang, setLang] = useState(() => localStorage.getItem('lang') || 'tr');

  useEffect(() => {
    localStorage.setItem('lang', lang);
  }, [lang]);

  const t = useCallback((key) => translations[lang][key] || key, [lang]);

  const value = useMemo(() => ({
    lang,
    setLang,
    t,
    toggleLang: () => setLang((prev) => (prev === 'tr' ? 'en' : 'tr'))
  }), [lang, t]);

  return <I18nContext.Provider value={value}>{children}</I18nContext.Provider>;
}